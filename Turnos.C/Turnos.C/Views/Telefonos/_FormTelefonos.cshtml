@model List<Turnos.C.Models.ViewModels.TelefonoViewModel>

<div id="telefonos-container">
    @for (int i = 0; i < Model.Count; i++)
    {
        <div class="telefono-item border rounded p-2 mb-2">
            <div class="form-group">
                <label>Prefijo</label>
                <input name="Telefonos[@i].Prefijo" class="form-control" value="@Model[i].Prefijo" />
                <span class="text-danger">@Html.ValidationMessage($"Telefonos[{i}].Prefijo")</span>
            </div>

            <div class="form-group">
                <label>Número</label>
                <input name="Telefonos[@i].Numero" class="form-control" value="@Model[i].Numero" />
                <span class="text-danger">@Html.ValidationMessage($"Telefonos[{i}].Numero")</span>
            </div>

            <div class="form-group">
                <label>Tipo</label>
                <select name="Telefonos[@i].TipoTelefono" class="form-control">
                    @foreach (var tipo in Enum.GetValues(typeof(Turnos.C.Models.TipoTelefono)))
                    {
                        if (tipo.Equals(Model[i].TipoTelefono))
                        {
                            <option value="@tipo" selected>@tipo</option>
                        }
                        else
                        {
                            <option value="@tipo">@tipo</option>
                        }
                    }
                </select>
                <span class="text-danger">@Html.ValidationMessage($"Telefonos[{i}].TipoTelefono")</span>
            </div>
        </div>
    }
</div>


<button type="button" class="btn btn-sm btn-secondary" onclick="agregarTelefono()">Agregar Teléfono</button>

<script>
    function agregarTelefono() {
        const container = document.getElementById("telefonos-container");
        const index = container.querySelectorAll('.telefono-item').length;

        const div = document.createElement("div");
        div.className = "telefono-item border rounded p-2 mb-2";

        div.innerHTML = `
            <div class="form-group">
                <label>Prefijo</label>
                <input name="Telefonos[${index}].Prefijo" class="form-control" />
            </div>

            <div class="form-group">
                <label>Número</label>
                <input name="Telefonos[${index}].Numero" class="form-control" />
            </div>

            <div class="form-group">
                <label>Tipo</label>
                <select name="Telefonos[${index}].TipoTelefono" class="form-control">
                    <option value="Fijo">Fijo</option>
                    <option value="Celular">Celular</option>
                    <option value="Otro">Otro</option>
                </select>
            </div>
        `;

        container.appendChild(div);
    }
</script>
